+++
title = '藥品衛教單張自動更新'
slug = 'medication-guidance-leaflet-auto-update'
date = 2023-10-09T16:15:58+08:00
draft = true
isCJKLanguage = true
showToc = true
TocOpen = true
categories = ['Python','PHP']
tags = []
+++

醫院領到的藥品通常都是一個藥袋裝著一種藥品，按照[藥師法第 19 條](https://law.moj.gov.tw/LawClass/LawSingle.aspx?pcode=L0030066&flno=19)規定，藥袋上必須印有姓名、性別、藥品名稱、劑量、數量、用法、作用或適應症、警語或副作用、藥局名稱及藥師姓名、調劑日期的標示。
{{< figure src="https://taipei.tzuchi.com.tw/wp-content/uploads/2021/09/20210908-5.jpg" width="60%" alt="台北慈濟藥袋" align="center" >}}

然而藥品的說明與注意事項通常是一個藥袋的內容長度放不完的，所以每家醫療機構都會製作「衛教單張」，對藥品、或者其他醫療器材、護理技巧等等，需要病人認真研讀後回家操作或留意的補充說明都可以泛稱之。

***
## 衛教單張改良計畫
本院資訊室目前提供衛教單張的方法是，當民眾有需求前來向藥師索取衛教單張時，藥師可以上院內系統列印該病人今天所有藥品的資訊，所有資訊都列在 A4 大小的紙張上，每個字真的是比螞蟻還小，而新細明體更令人難以閱讀。
![原本的衛教單張](/images/2023-10-mgl-before.png)

　

比較接近使用者體驗的衛教單張，應該是**一種藥品一張 A4** ，避免文字過小，也不會與。並且**電子方式**供民眾閱覽，例如以 QR code 提供民眾掃描後直接以手機觀看，減少紙張印刷。
{{< figure src="https://img.freepik.com/premium-vector/vector-illustratie-hand-met-mobiele-telefoon-code-scanner-of-lezer-en-scannen-van-een-qr-code-op-een-fles-geneeskunde-ehbo-kit_163983-2489.jpg" width="80%" alt="Scan QR" align="center" >}}
理想中的電子衛教單張檔案格式應該是 **pdf 檔案**，是目前手機瀏覽器泛用可接受的檔案格式。排除可能會開啟不順利、受限於使用者端的排版的 doc 檔、 odt 檔，其他的選擇還有圖片類型的 png 檔或 jpg 檔，然而圖片檔案的文字如果放大觀看，可能因為解析度問題造成模糊，並不是上選。

因為資安問題，本院資訊室無法讓我直接修改醫院官方網站的部分頁面，折衷方式是允許我使用 FTP 將預先製作好的檔案上傳，並且讓民眾連結到該檔案下載或直接閱讀。因此接下來就是以 python 遍歷藥品品項檔，將所有的藥品預先製作好 pdf 檔案，並使用 FTP 上傳檔案至指定位置。
***
## Python 製作 pdf
### ReportLab
我們使用 ReportLab 來進行 pdf 檔的製作，
### threading.Thread
***
## PHP 製作 pdf
### setasign\Fpdi
### requests.get
***
## FTP 上傳檔案
***
## 實作與成果